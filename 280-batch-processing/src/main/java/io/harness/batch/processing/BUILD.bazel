load("@rules_java//java:defs.bzl", "java_binary", "java_library")

java_library(
    name = "processing",
    srcs = [
        "ApplicationReadyListener.java",
        "BatchProcessingApplication.java",
        "BatchProcessingException.java",
        "YamlPropertyLoaderFactory.java",
    ],
    visibility = ["//:__subpackages__"],
    deps = [
        "//280-batch-processing/src/main/java/io/harness/batch/processing/config",
        "//350-event-server/src/main/java/io/harness/event/app",
        "//960-persistence/src/main/java/io/harness/mongo",
        "//960-persistence/src/main/java/io/harness/persistence",
        "//980-commons/src/main/java/io/harness/concurrent",
        "//980-commons/src/main/java/io/harness/eraro",
        "@maven//:com_google_guava_guava",
        "@maven//:org_mongodb_morphia_morphia",
        "@maven//:org_projectlombok_lombok",
        "@maven//:org_springframework_batch_spring_batch_core",
        "@maven//:org_springframework_boot_spring_boot",
        "@maven//:org_springframework_boot_spring_boot_autoconfigure",
        "@maven//:org_springframework_spring_context",
        "@maven//:org_springframework_spring_core",
    ],
)

java_binary(
    name = "BatchProcessingApplication",
    main_class = "io.harness.batch.processing.BatchProcessingApplication",
    visibility = ["//visibility:public"],
    runtime_deps = [":processing"],
)
