# Versioning

Breaking changes should be avoided, however, can be inevitable and failing to prepare for this would be an oversight. To handle breaking changes we version the API. 

## API Version

The API is versioned on two levels:
1. Core principles of the API 
2. Implementation within this core.

The core principles should rarely change and marks a significant departure from the basic underpinnings of the existing API e.g. a system-wide refactor of core concepts or resources. For this reason individual services or endpoints should not need to be concerned with changes at this level. This version is represented as the initial segment within the path e.g. the “v1” within `api.hanress.io/v1/`.

In addition we provide API versioning within this by a date: each time a breaking change is made on the over v1 API a new version is released with the date of the release. API consumers can continue to use a specific version by passing the Version header with the date version e.g. Version: 2022-04-29. Management of these version updates must be handled with care and managed centrally given the impact across the whole API. 

_Note: to ensure minimal impact to the api consumer, before a breaking change can be made the endpoint must ensure the previous version is still supported. This includes both read and write operations._ 

Some examples:

- Removal of a resource or an action against a resource: the resource and functionality must remain on the old API, any persisted data must continue to be applied to the backing storage / db.
- Removal of a resource attribute: the attribute must continue to be available on the old API, any persisted data must continue to be applied to the backing storage / db.
- Renaming a resource attribute: internally a translation layer could ensure the naming change continues correctly on the new version as well as previous.
- Removal of a filter parameter: filters must continue to be available to the old API 

## Backward Compatitable Change
Harness does not consider the following to be breaking changes:

- Additional resources within the API
- Additional actions which can be taken against a given resource
- Addition of optional attributes on a resource
- Addition of optional filter parameters against a resource
- Order of attributes within a resource
- Length of strings auto-generated by the harness platform

## End of Life

All versions should have an EOL beyond which harness no longer officially supports and behavior is undocumented. Currently, this period is TBD.

